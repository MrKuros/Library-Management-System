{% extends "base.html" %}

{% block title %}Members - Library Management System{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Members</h1>
<button onclick="openModal('addMemberModal')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded mb-4">
    Add New Member
</button>
<div class="overflow-x-auto">
    <table class="min-w-full bg-white">
        <thead class="bg-gray-100">
            <tr>
                <th class="py-2 px-4 border-b">Name</th>
                <th class="py-2 px-4 border-b">Email</th>
                <th class="py-2 px-4 border-b">Outstanding Debt</th>
                <th class="py-2 px-4 border-b">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for member in members %}
            <tr>
                <td class="py-2 px-4 border-b">{{ member.name }}</td>
                <td class="py-2 px-4 border-b">{{ member.email }}</td>
                <td class="py-2 px-4 border-b">â‚¹{{ member.outstanding_debt }}</td>
                <td class="py-2 px-4 border-b">
                    <a href="{{ url_for('edit_member', id=member.id) }}" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-1 px-2 rounded text-sm">Edit</a>
                    <a href="{{ url_for('delete_member', id=member.id) }}" class="bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-2 rounded text-sm" onclick="return confirm('Are you sure you want to delete this member?')">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Add Member Modal -->
<div id="addMemberModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
            <h3 class="text-lg leading-6 font-medium text-gray-900">Add New Member</h3>
            <div class="mt-2 px-7 py-3">
                <form action="{{ url_for('add_member') }}" method="POST">
                    <input type="text" name="name" placeholder="Name" class="mb-3 px-3 py-2 border rounded-lg w-full" required>
                    <input type="email" name="email" placeholder="Email" class="mb-3 px-3 py-2 border rounded-lg w-full" required>
                    <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">Add Member</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function openModal(modalId) {
        document.getElementById(modalId).classList.remove('hidden');
    }

    window.onclick = function(event) {
        if (event.target.id === 'addMemberModal') {
            event.target.classList.add('hidden');
        }
    }
</script>
{% endblock %}
